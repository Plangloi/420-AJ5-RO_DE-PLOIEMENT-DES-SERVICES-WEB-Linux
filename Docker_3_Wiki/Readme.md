### Prerequisites

   **Docker:** 
   
 - [ ] Install Docker [Docker Web Site](https://docs.docker.com/engine/install/ubuntu/)
 

    # Install Docker:
================
```
sudo apt-get update
```
```
sudo apt-get install ca-certificates curl
```
```
sudo install -m 0755 -d /etc/apt/keyrings
```
```
sudo curl -fsSL https://download.docker.com/linux/ubuntu/gpg -o /etc/apt/keyrings/docker.asc
sudo chmod a+r /etc/apt/keyrings/docker.asc
```
```














 Ensure Docker is installed and running on your machine.

 4.   **Docker Compose (Optional):** For managing multi-container Docker applications. Wiki.js can run without it, but Docker Compose simplifies the process.

### Step 1: Pull the Wiki.js Docker Image

1.  **Open a Terminal:** Start by opening your command line or terminal.
2.  **Pull the Image:** Run the following command to pull the latest Wiki.js Docker image from the Docker Hub:

bashCopy code

`docker pull requarks/wiki:2` 

This command downloads the Wiki.js image tagged with `2`, which refers to the version. You can replace `2` with a different version if needed.

### Step 2: Create a Docker Volume

Docker volumes are used to persist data generated by and used by Docker containers. In the context of Wiki.js, you'll want to persist the database and configuration files.

bashCopy code

`docker volume create wikijs_data` 

This command creates a new volume named `wikijs_data`.

### Step 3: Run the Wiki.js Container

Now, you'll start a container from the Wiki.js image. This example uses PostgreSQL as the database, which is recommended by Wiki.js but requires you to set up a PostgreSQL database separately. If you already have a database (PostgreSQL, MySQL, etc.) ready, you can proceed. Otherwise, set up your database first.

bashCopy code

`docker run -d --name wiki \
  -p 80:3000 \
  -e "DB_TYPE=postgres" \
  -e "DB_HOST=your_database_host" \
  -e "DB_PORT=5432" \
  -e "DB_USER=your_database_user" \
  -e "DB_PASS=your_database_password" \
  -e "DB_NAME=your_database_name" \
  --restart unless-stopped \
  --volume wikijs_data:/var/wiki \
  requarks/wiki:2` 

Replace `your_database_host`, `your_database_user`, `your_database_password`, and `your_database_name` with your actual database details. This command runs Wiki.js in a container named `wiki`, binds port 80 of the host to port 3000 of the container (where Wiki.js by default runs), and sets several environment variables for database connectivity.

### Step 4: Accessing Wiki.js

After the container starts, open a web browser and navigate to `http://localhost` (or your server's IP address if you're not running it locally). You should see the Wiki.js setup wizard, which will guide you through the final setup steps.

### Additional Steps for Docker Compose

If you prefer using Docker Compose, create a `docker-compose.yml` file with the necessary services (Wiki.js and your database) and run `docker-compose up`. This approach simplifies managing the containers and their configurations.

### Conclusion

This guide walked you through the process of running Wiki.js inside a Docker container, a task aligning well with your interests in VMs, networking, and programming. Remember, the details can be adjusted based on your specific requirements, such as using a different database or customizing the Wiki.js version.

![User](https://lh3.googleusercontent.com/a/AEdFTp7wNlP6peB5R3PgbxNDH5rKNOGDwuCwR-eHWKdweA=s96-c)

You

Show me the docker compose technique

ChatGPT

ChatGPT

Using Docker Compose is an efficient way to manage Docker containers, especially when dealing with applications that require multiple services (like a web application and a database). For Wiki.js, Docker Compose can simplify running Wiki.js along with its database. Below is a basic example of a `docker-compose.yml` file to run Wiki.js with PostgreSQL as the database.

### Prerequisites

Ensure you have Docker and Docker Compose installed on your system.

### Step 1: Create Docker Compose File

Create a file named `docker-compose.yml` in your preferred directory. This file defines the services, networks, and volumes for your Docker application.

### Step 2: Define Services

In the `docker-compose.yml` file, you'll define two services: `db` for the PostgreSQL database, and `wiki` for Wiki.js itself. Here's an example:

yamlCopy code

`version: '3.8'

services:
  db:
    image: postgres:12
    environment:
      POSTGRES_DB: wikijs
      POSTGRES_USER: wikijs
      POSTGRES_PASSWORD: examplePassword
    volumes:
      - wikijs_db_data:/var/lib/postgresql/data
    restart: unless-stopped

  wiki:
    image: requarks/wiki:2
    depends_on:
      - db
    environment:
      DB_TYPE: postgres
      DB_HOST: db
      DB_PORT: 5432
      DB_USER: wikijs
      DB_PASS: examplePassword
      DB_NAME: wikijs
    ports:
      - "80:3000"
    volumes:
      - wikijs_data:/var/wiki
    restart: unless-stopped

volumes:
  wikijs_db_data:
  wikijs_data:` 

This file does a few important things:

-   It pulls the `postgres:12` image to use for the database.
-   It sets up environment variables for the database, such as the user, password, and database name (`wikijs`).
-   It mounts a volume `wikijs_db_data` for persistent PostgreSQL data storage.
-   It pulls the `requarks/wiki:2` image for Wiki.js and configures it to connect to the `db` service for its database needs.
-   It forwards port 80 on the host to port 3000 on the container, making the Wiki.js accessible via the host machine's IP or domain.
-   It creates a volume `wikijs_data` for persistent Wiki.js data storage.

### Step 3: Start the Services

Navigate to the directory containing your `docker-compose.yml` file and run the following command:

bashCopy code

`docker-compose up -d` 

This command will download the necessary Docker images, create the containers, and start the services as defined in your `docker-compose.yml` file. The `-d` flag runs the containers in the background.

### Step 4: Access Wiki.js

After the containers start, open a web browser and navigate to `http://localhost` to access Wiki.js. You will be greeted with the setup wizard for Wiki.js.

### Step 5: Manage Your Services

With Docker Compose, you can easily manage your services with commands like:

-   `docker-compose down` to stop and remove the containers and networks created.
-   `docker-compose stop` to stop the services without removing them.
-   `docker-compose start` to start the services again.

This `docker-compose.yml` setup provides a simple yet powerful way to run Wiki.js with a PostgreSQL database in Docker, making it easy to manage and ensuring a consistent environment for deployment.
